<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<!--
	CREATED BY : NITHYAPRIYA
	DATE       : 22-09-24
	PURPOSE    : BACP - MINIMAL DATA
	VERSION    : 01
-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">

<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script class="jsbin"
	src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>

<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
	th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>


<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<script src="js/bootstrap411.js"></script>
<link rel="stylesheet" type="text/css"
	href="https://cdn.jsdelivr.net/npm/signature_pad/dist/signature-pad.css">
<script src="https://cdn.jsdelivr.net/npm/signature_pad"></script>
<script src="https://cdn.jsdelivr.net/npm/signature_pad"></script>
<link rel="stylesheet" href="css/signature-pad.css">


<style>
.uniform-input {
	width: 160px; /* You can adjust this width to fit your layout */
	box-sizing: border-box; /* Ensures consistent sizing */
}

.row {
	display: flex;
	margin-left: 0px;
	margin-right: 0px
}

.col, .col-1, .col-10, .col-11, .col-12, .col-2, .col-3, .col-4, .col-5,
	.col-6, .col-7, .col-8, .col-9, .col-auto, .col-lg, .col-lg-1,
	.col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4,
	.col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-auto,
	.col-md, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2,
	.col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8,
	.col-md-9, .col-md-auto, .col-sm, .col-sm-1, .col-sm-10, .col-sm-11,
	.col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6,
	.col-sm-7, .col-sm-8, .col-sm-9, .col-sm-auto, .col-xl, .col-xl-1,
	.col-xl-10, .col-xl-11, .col-xl-12, .col-xl-2, .col-xl-3, .col-xl-4,
	.col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-auto {
	width: 100%;
	padding-right: 0px;
	padding-left: 0px;
}

.btn {
	line-height: 0.5rem;
}

.table-bordered td, .table-bordered th {
	font-size: smaller;
}

.container-manager {
	width: 83.5%;
	padding-right: 15px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: 17.3%;
	margin-top: 80px;
	margin-top: 80px;
}

.signature-pad {
	margin: auto;
	height: auto;
}

.custom-modal {
	max-width: 80%; /* Set width as 80% of the screen width */
	max-height: 500%; /* Set height as 80% of the screen height */
}

.custom-modal .modal-content {
	height: 500%; /* Make sure the content fills the full height */
}

.signature-pad--body {
	min-height: 360px;
}

.signature-pad--actions {
	overflow: hidden;
}

.signature-pad--actions>div:first-child {
	float: left;
}

.signature-pad--actions>div:last-child {
	float: right;
}

.tab {
	overflow: hidden;
	border: 1px solid #ccc;
	background-color: #f1f1f1;
}

canvas {
	display: block;
	position: relative;
	border: 1px solid;
}

/*css style starts for the image*/
.file-upload {
	background-color: #ffffff;
	width: 200px;
	margin: 0 auto;
	padding: 20px;
}

.file-upload-content {
	display: none;
	text-align: left;
}

.image-upload-wrap {
	margin-top: 0px;
	margin-left: 20px;
	width: 150px;
	height: 150px;
	border: 1px dashed #000000;
	position: relative;
}

.image-title-wrap {
	padding: 0 15px 15px 15px;
	color: #222;
}

.drag-text {
	text-align: center;
}

.drag-text h3 {
	font-weight: 100;
	text-transform: uppercase;
	color: #000000;
	padding: 60px 0;
}

.file-upload-image {
	max-height: 200px;
	max-width: 200px;
	margin: auto;
	padding: 20px;
}

.remove-image {
	width: 200px;
	margin: 0;
	color: #fff;
	background: #cd4535;
	border: none;
	padding: 10px;
	border-radius: 4px;
	border-bottom: 4px solid #b02818;
	transition: all .2s ease;
	outline: none;
	text-transform: uppercase;
	font-weight: 700;
}

.remove-image:active {
	border: 0;
	transition: all .2s ease;
}

.file-upload-input {
	position: absolute;
	margin: 0;
	padding: 0;
	width: 100%;
	height: 100%;
	outline: none;
	opacity: 0;
	cursor: pointer;
}

.image-upload-wrapone {
	margin-top: 30px;
	width: 150px;
	height: 150px;
	border: 1px dashed #000000;
	position: relative;
}

.image-dropping, .image-upload-wrap:hover {
	background-color: #ffffff;
	border: 4px dashed #ffffff;
}

/* Style the buttons inside the tab */
.tab button {
	background-color: inherit;
	float: left;
	border: none;
	outline: none;
	cursor: pointer;
	padding: 14px 16px;
	transition: 0.3s;
	font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
	background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
	background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
	display: none;
	padding: 6px 12px;
	border: 0px solid #ccc;
	border-top: none;
}

.input-group-append {
	margin-top: 130px;
	margin-left: 30px;
}

#CorporateDetail, #RetailDetail2, #fieldsOption3, #Joint_Account_Retail,
	#Joint_Account_Corporate {
	display: none;
}

#duplicate_Yes, #duplicate_No, #Blacklist_Yes, #Blacklist_No,
	#Negativelist_No, #Negativelist_Yes {
	display: none;
}

.loader__dot {
	animation: 1s blink infinite
}

.loader__dot:nth-child(2) {
	animation-delay: 250ms
}

.loader__dot:nth-child(3) {
	animation-delay: 500ms
}

body {
	font-family: Arial, Helvetica, sans-serif;
}

.myModal {
	position: absolute;
	width: 50%;
	height: 50%;
	float: top;
}

/* The Modal (background) */
.modal {
	display: none;
	/* Hidden by default */
	position: absolute;
	/* Stay in place */
	z-index: 1;
	/* Sit on top */
	padding-top: 100px;
	/* Location of the box */
	left: 0;
	top: 0;
	width: 100%;
	/* Full width */
	height: 100%;
	/* Full height */
	overflow: auto;
	/* Enable scroll if needed */
	background-color: rgb(0, 0, 0);
	/* Fallback color */
	background-color: rgba(0, 0, 0, 0.4);
	/* Black w/ opacity */
}

/* Modal Content */
.modal-content {
	background-color: #fefefe;
	margin: auto;
	padding: 20px;
	border: 1px solid #888;
	width: 80%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
		rgba(0, 0, 0, 0.19);
	-webkit-animation-name: animatetop;
	-webkit-animation-duration: 0.4s;
	animation-name: animatetop;
	animation-duration: 0.4s
}

/* Add Animation */
@webkit-keyframes animatetop {from { top:-300px;
	opacity: 0
}

to {
	top: 0;
	opacity: 1
}

}
@keyframes animatetop {from { top:-300px;
	opacity: 0
}

to {
	top: 0;
	opacity: 1
}

}

/* align-items: center;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}*/

/* The Close Button */
.close {
	color: #aaaaaa;
	float: right;
	font-size: 28px;
	font-weight: bold;
}

.close:hover, .close:focus {
	color: #000;
	text-decoration: none;
	cursor: pointer;
}

.modal-header {
	padding: 2px 16px;
	background-color: #BBC3CB;
	color: balck;
}

.modal-body {
	padding: 2px 16px;
}

.modal-footer {
	padding: 2px 16px;
	background-color: #BBC3CB;
	color: black;
}

.flex-row {
	display: flex;
}

.wrapper {
	border: 1px solid #4b00ff;
	border-right: 0;
}

canvas#signature-pad {
	background: #fff;
	width: 100%;
	height: 100%;
	cursor: crosshair;
}

button#clear {
	height: 100%;
	background: #4b00ff;
	border: 1px solid transparent;
	color: #fff;
	font-weight: 600;
	cursor: pointer;
}

button#clear span {
	transform: rotate(90deg);
	display: block;
}

.error {
	color: red;
}
</style>
<style type="text/css">
.ml-700 {
	margin-left: 800px;
}
</style>

<script>
	function Home() {

		location.href = 'Dashboard';
	}

	function Back() {
		window.history.back();
	}
</script>


<script th:inline="javascript">
		/*<![CDATA[*/
function nextt() {
 
    var count = document.getElementById("listsize").innerHTML;
   
    var ApprefNO = document.getElementById("appl_ref_no").value;
    var ls = document.getElementById("listsizecount").innerHTML;
  //  alert(count + ApprefNO + ls);

    if (count == ls) {
        // Do something if count is equal to ls
    } else {
        location.href = 'CustomerOnboarding?formmode=add&count=' + count + '&ApprefNO=' + ApprefNO + '&ls=' + ls;
        event.preventDefault();
    }
}


function prevv(a){
	
	  
    var count = document.getElementById("listsize").innerHTML;
   // alert(count);
    var ApprefNO = document.getElementById("appl_ref_no").value;
    var ls = document.getElementById("listsizecount").innerHTML;
   // alert(count + ApprefNO + ls);

if(ls== "1"){
	
}
else{
  // location.href = 'CustomerOnboarding?formmode=add&count=' + count + "&ApprefNO=" + ApprefNO + '&ls=' + adjustedLs;
 window.history.back();
}
};



		function myFunction() {
			var x = document.getElementById("noOfper").value;
			document.getElementById("NOP").innerHTML = x;
		}

		var source = document.getElementById("noOfper").value;

		source.onmessage = function (event) {
			var x = document.getElementById("noOfper").value;
			document.getElementById("NOP").innerHTML = x;
		};

		window.onload = function () {
			document.getElementById('firstbutton').click();
		}
		function list() {
			location.href = 'AuditInquiries?formmode=list';
		}
		function fnClick(a) {
			var refnumber = a.getAttribute("data-refnumber")
			location.href = 'AuditInquiries?formmode=edit&refnumber=' + refnumber
		}

		function home() {
			location.href = 'Dashboard'
		}

		function fndashboard() {
			location.href = 'Dashboard'
		}

		function add() {
			location.href = 'CustomerOnboarding?formmode=add';
		}

		function back() {
			window.history.back();
		}

		function autofill() {
			//alert("here");
			var first = document.getElementById("cust_name").value;
			//alert(first);
			document.getElementById("cust_name").value = first;
		}

		function checkcust() {
		    let hasError = false;
		    const accType = $("#acc_type").val(); // Get the account type
		   /*  if ($("#acc_type").val() === "") {
	            showError($("#acc_type"), 'Required');
	            hasError = true;
	        } else {
	            hideError($("#acc_type"));
	        }  */
	        
		    // Validation for 'INDIVIDUAL' account type
		    if (accType === "INDIVIDUAL") {
		    	 if ($("#fullname").val() === "") {
			            showError($("#fullname"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#fullname"));
			        }

		    	 if ($("#prisolidmini").val() === "") {
			            showError($("#prisolidmini"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#prisolidmini"));
			        }
		    	 
		    	 if ($("#Cust_Grp").val() === "") {
			            showError($("#Cust_Grp"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#Cust_Grp"));
			        }
		    	 
			        if ($("#Passport_num").val() === "") {
			            showError($("#Passport_num"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#Passport_num"));
			        }
			        
			        if ($("#short_nam").val() === "") {
			            showError($("#short_nam"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#short_nam"));
			        }
			        
		        if ($("#national_id3").val() === "") {
		            showError($("#national_id3"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#national_id3"));
		        }

		        if ($("#cust_name").val() === "") {
		            showError($("#cust_name"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#cust_name"));
		        }

		        if ($("#date_bir").val() === "") {
		            showError($("#date_bir"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#date_bir"));
		        }

		        if ($("#Mobile_num").val() === "") {
		            showError($("#Mobile_num"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#Mobile_num"));
		        }

		    // Validation for 'JOINT ACCOUNT' account type
		    } else if (accType === "JOINT ACCOUNT") {
		    	 if ($("#cust_grp2").val() === "") {
			            showError($("#cust_grp2"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#cust_grp2"));
			        }

		    	 if ($("#shgrp").val() === "") {
			            showError($("#shgrp"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#shgrp"));
			        }
		    	 
			        if ($("#rel").val() === "") {
			            showError($("#rel"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#rel"));
			        }

			        if ($("#brn").val() === "") {
			            showError($("#brn"), 'Required');
			            hasError = true;
			        } else {
			            hideError($("#brn"));
			        }
			        
		        if ($("#first_name").val() === "") {
		            showError($("#first_name"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#first_name"));
		        }

		        if ($("#full_name").val() === "") {
		            showError($("#full_name"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#full_name"));
		        }

		        if ($("#dob").val() === "") {
		            showError($("#dob"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#dob"));
		        }

		        if ($("#mbl_num").val() === "") {
		            showError($("#mbl_num"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#mbl_num"));
		        }
		        
		        if ($("#passno").val() === "") {
		            showError($("#passno"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#passno"));
		        }

		        if ($("#national_id").val() === "") {
		            showError($("#national_id"), 'Required');
		            hasError = true;
		        } else {
		            hideError($("#national_id"));
		        }
		    }

		    // If there are validation errors, show the modal and exit the function
		    if (hasError) {
		        $('#myrequired').modal("toggle");
		        $('#myrequired .modal-body').text("Enter the Required fields...!");
		        return; // Exit the function if there are validation errors
		    }

		    // Proceed with customer check if validation passed
		    document.getElementById("customerCheck").removeAttribute("hidden");
		    const natid = document.getElementById("national_id").value;
		    var duplicate_Yes = document.getElementById('duplicate_Yes');
		    var duplicate_No = document.getElementById('duplicate_No');
		    var Blacklist_Yes = document.getElementById('Blacklist_Yes');
		    var Blacklist_No = document.getElementById('Blacklist_No');
		    var Negativelist_Yes = document.getElementById('Negativelist_Yes');
		    var Negativelist_No = document.getElementById('Negativelist_No');

		    // Modals
		    var dedmodal = document.getElementById("myModalded");
		    dedmodal.style.display = "block";
		    event.preventDefault();

		    // Duplicate list check
		    $.ajax({
		        type: 'GET',
		        url: "/BGLS/CheckDuplicate?id=" + natid,
		        success: function (response) {
		            if (response !== "clear") {
		                duplicate_Yes.style.display = 'block';
		            } else {
		                duplicate_No.style.display = 'block';
		            }
		        }
		    });

		    // Blacklist check
		    $.ajax({
		        type: 'GET',
		        url: "/BGLS/CheckBlackList?id=" + natid,
		        success: function (response) {
		            if (response !== "clear") {
		                Blacklist_Yes.style.display = 'block';
		            } else {
		                Blacklist_No.style.display = 'block';
		            }
		        }
		    });

		    // Negative list check
		    $.ajax({
		        type: 'GET',
		        url: "/BGLS/CheckNegativeList?id=" + natid,
		        success: function (response) {
		            if (response !== "clear") {
		                Negativelist_Yes.style.display = 'block';
		            } else {
		                Negativelist_No.style.display = 'block';
		            }
		            dedmodal.style.display = "none";
		        }
		    });

		    document.getElementById("checkbuttons").style.visibility = 'hidden';
		    document.getElementById("proceed&Hold").removeAttribute("hidden");
		}

		///Check customer ending place

	</script>

<script>
function proceedclick() {
    /* var hasError = false; */

/*     // Validation for required fields
    if ($("#acc_type").val() === "") {
        showError($("#acc_type"), 'Required');
        hasError = true;
    } else {
        hideError($("#acc_type"));
    }

    if ($("#Cust_Grp").val() === "") {
        showError($("#Cust_Grp"), 'Required');
        hasError = true;
    } else {
        hideError($("#Cust_Grp"));
    }

    if ($("#cust_name").val() === "") {
        showError($("#cust_name"), 'Required');
        hasError = true;
    } else {
        hideError($("#cust_name"));
    }

    if ($("#fullname").val() === "") {
        showError($("#fullname"), 'Required');
        hasError = true;
    } else {
        hideError($("#fullname"));
    }

    if ($("#date_bir").val() === "") {
        showError($("#date_bir"), 'Required');
        hasError = true;
    } else {
        hideError($("#date_bir"));
    }

    if ($("#Mobile_num").val() === "") {
        showError($("#Mobile_num"), 'Required');
        hasError = true;
    } else {
        hideError($("#Mobile_num"));
    }

    if ($("#Passport_num").val() === "") {
        showError($("#Passport_num"), 'Required');
        hasError = true;
    } else {
        hideError($("#Passport_num"));
    }

    if ($("#national_id3").val() === "") {
        showError($("#national_id3"), 'Required');
        hasError = true;
    } else {
        hideError($("#national_id3"));
    }
    if (hasError) {
        $('#myrequired').modal("toggle");
        $('#myrequired .modal-body').text("Enter the Required fields...!");
    }  */
    // Display modal alert if there are any errors

        var noofpersons = $("#noOfper").val();
        var accType = $("#acc_type").val(); // Get the selected account type 
        var showcorporate = document.getElementById('showcorporate').value;
        if (accType === "INDIVIDUAL") {  
        // Check if the account type is INDIVIDUAL 
        	var branchid = document.getElementById("prisolidmini").value;	 
            var branchdesc = document.getElementById("branchdescmini").value;
            var firstname = document.getElementById("cust_name").value;	 
            var middlename = document.getElementById("sche_type").value; 
            var lastname = document.getElementById("sche_code").value; 
            var fullname = document.getElementById("fullname").value; 
            var shortname = document.getElementById("short_nam").value; 
            var datebirth = document.getElementById("date_bir").value; 
            var mobileno = document.getElementById("Mobile_num").value; 
            var passno = document.getElementById("Passport_num").value; 
            var nationalid = document.getElementById("national_id3").value; 
 
         	var data = {
         	   	    formmode: 'proceed',
         	   	    noofpersons: noofpersons,
         	   	accType: accType,
         	   branchid: branchid,
         	  branchdesc: branchdesc,
         	   	firstname: firstname,
         	   middlename: middlename,
         	  lastname: lastname,
         	 fullname: fullname,
         	shortname: shortname,
         	datebirth: datebirth,
         	mobileno: mobileno,
         	passno: passno,
         	nationalid: nationalid, 
         	   	
         	   	};
         	   var params = new URLSearchParams(data).toString();

            	$.ajax({
           	    url: 'CustomerOnboarding?' + params,
           	    type: 'GET', // Or 'POST' if you want to send data via POST
           	    contentType: 'application/json',
           	    success: function(response) {
           	        // Handle the response from the server
           	        console.log('Success:', response);
           	   location.href = 'CustomerOnboarding?formmode=proceed';
           	    
           	    },
           	    error: function(xhr, status, error) {
           	        // Handle any errors
           	        console.error('Error:', error);
           	    }
           	});
        } else if (accType === "JOINT ACCOUNT") {  // Check if the account type is JOINT ACCOUNT  
            
          		var branchid = document.getElementById("prisolidminija").value;	 
          		var branchdesc = document.getElementById("branchdescminija").value;
          		var firstname = document.getElementById("first_name").value; 
                var middlename = document.getElementById("midname").value; 
                var lastname = document.getElementById("last_name").value; 
                var fullname = document.getElementById("full_name").value; 
                var shortname = document.getElementById("shgrp").value; 
                var datebirth = document.getElementById("dob").value; 
                var mobileno = document.getElementById("mbl_num").value; 
                var passno = document.getElementById("passno").value; 
                var nationalid = document.getElementById("national_id").value; 
            // Redirect for JOINT ACCOUNT
         	var data = {
         	   	    formmode: 'proceed',
         	   	    noofpersons: noofpersons,
         	   	accType: accType,
         	   branchid: branchid,
          	  branchdesc: branchdesc,
         	   	firstname: firstname,
         	   middlename: middlename,
         	  lastname: lastname,
         	 fullname: fullname,
         	shortname: shortname,
         	datebirth: datebirth,
         	mobileno: mobileno,
         	passno: passno,
         	nationalid: nationalid, 
         	   	
         	   	};
         	   var params = new URLSearchParams(data).toString();

            	$.ajax({
           	    url: 'CustomerJoint?' + params,
           	    type: 'GET', // Or 'POST' if you want to send data via POST
           	    contentType: 'application/json',
           	    success: function(response) {
           	        // Handle the response from the server
           	        console.log('Success:', response);
           	   location.href = 'CustomerJoint?formmode=proceed';
           	    
           	    },
           	    error: function(xhr, status, error) {
           	        // Handle any errors
           	        console.error('Error:', error);
           	    }
           	});
        }else if(showcorporate == 'CORPORATE'){  
           	var noofpersons = 	$("#noOfper").val(); 
        	var cons_name = 	$("#cons_name").val();
        	var branchid = document.getElementById("prisolidmini_corp").value;	 
      		var branchdesc = document.getElementById("branchdescmini_corp").value;
        	var cor_name = document.getElementById("cor_name").value;
           	var trade_name = document.getElementById("trade_name").value;
           	var cer_od_incop = document.getElementById("cer_od_incop").value;
           	var buss_ref_no = document.getElementById("buss_ref_no").value;
           	var doi = document.getElementById("doi").value;
           	var pbn = document.getElementById("pbn").value;
           	var lno = document.getElementById("lno").value;
           	var fn = document.getElementById("fn").value;
           	var email = document.getElementById("email").value;
           	var website = document.getElementById("website").value;
         	var data = {
         	   	    formmode: 'corporate',
         	   	    noofpersons: noofpersons,
         	   	    cons_name: cons_name,
         	   	cor_name: cor_name,
           	    trade_name: trade_name,
           	    cer_od_incop: cer_od_incop,
           	    buss_ref_no: buss_ref_no,
           	    doi: doi,
           	    pbn: pbn,
           	    lno: lno,
           	    fn: fn,
           	    email: email,
           	    website: website,
           	 branchid:branchid,
           	branchdesc:branchdesc
         	   	
         	   	};
         	   var params = new URLSearchParams(data).toString();

            	$.ajax({
           	    url: 'CustomerOnboarding?' + params,
           	    type: 'GET', // Or 'POST' if you want to send data via POST
           	    contentType: 'application/json',
           	    success: function(response) {
           	        // Handle the response from the server
           	        console.log('Success:', response);
           	   location.href = 'CustomerOnboarding?formmode=corporate';
           	    
           	    },
           	    error: function(xhr, status, error) {
           	        // Handle any errors
           	        console.error('Error:', error);
           	    }
           	});

    // Construct the URL for INDIVIDUAL
  
}
}
    function showError(element, message) {
        var errorSpan = $('<span class="error-message"></span>').text(message);
        errorSpan.css('color', 'red');
        element.after(errorSpan);
    }

    function hideError(element) {
        element.next('.error-message').remove();
    }
    
   
</script>
<script>
	function  signsubmit(a){ 

		const numberElement = document.getElementById("numberone").textContent;
	//	alert(numberElement)
		var imgaccesscode = document.getElementById("imgaccesscode").value;
		var group = document.getElementById("group").value;
		var keyword = document.getElementById("keyword").value;
		var appl_ref_no = a.getAttribute("data-refnumber")
		//alert(appl_ref_no)
		
			  let imgElement = null;
    let Sign = null;

    if (numberElement === "1") {
        imgElement = document.getElementById("imagefile");
        Sign = document.querySelector('#vjImage');
    } else if (numberElement === "2") {
        imgElement = document.getElementById("imagefile1");
        Sign = document.querySelector('#vjImage1');
    } else if (numberElement === "3") {
        imgElement = document.getElementById("imagefile2");
        Sign = document.querySelector('#vjImage2');
    } else if (numberElement === "4") {
        imgElement = document.getElementById("imagefile3");
        Sign = document.querySelector('#vjImage3');
    } else if (numberElement === "5") {
        imgElement = document.getElementById("imagefile4");
        Sign = document.querySelector('#vjImage4');
    } else if (numberElement === "6") {
        imgElement = document.getElementById("imagefile5");
        Sign = document.querySelector('#vjImage5');
    } else if (numberElement === "7") {
        imgElement = document.getElementById("imagefile6");
        Sign = document.querySelector('#vjImage6');
    } else if (numberElement === "8") {
        imgElement = document.getElementById("imagefile7");
        Sign = document.querySelector('#vjImage7');
    }
    var dataURL = null;
    if (imgElement) {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        canvas.width = imgElement.width;
        canvas.height = imgElement.height;
        ctx.drawImage(imgElement, 0, 0, canvas.width, canvas.height);
        dataURL = canvas.toDataURL('image/jpg'); 
    }
    var srcURL = Sign ? Sign.src : null;

			//alert(srcURL);
			
		
		var formData = new FormData();
		formData.append("appl_ref_no", appl_ref_no);
		formData.append("srcURL", srcURL);
		formData.append("dataURL", dataURL);
		formData.append("imgaccesscode", imgaccesscode);
		formData.append("group", group);
		formData.append("keyword", keyword);
		formData.append("numberElement", numberElement);

		$.ajax({
			type: 'POST',
			url: './AddStudentss',
			data: formData,
			contentType: false,
			processData: false,
			success: function (response) {
				  $("#finalpopup .modal-body").html(response);

	                // Show the modal
	                $('#finalpopup').modal('show');
				var count="88";
				var refnumber =appl_ref_no;
				//alert(refnumber)

				location.href = 'CustomerProfile?formmode=view&numberElement='	+ numberElement + "&ApprefNO=" + refnumber;
			}
		}); 
		
	}
	 
	 

	</script>

<script>


		function holdclick() {
	//		alert("Hold click");
			location.href = 'CustomerOnboarding?formmode=hold';

		}

		function readURL(input) {
			var Thisinput = $(input)
			if (input.files && input.files[0]) {

				var reader = new FileReader();

				reader.onload = function (e) {
					Thisinput.closest('.file-uploadone').find('.image-upload-wrap')
						.hide();

					Thisinput.closest('.file-uploadone').find('.file-upload-image')
						.attr('src', e.target.result);
					Thisinput.closest('.file-uploadone').find('.file-upload-content')
						.show();

					Thisinput.closest('.file-uploadone').find('.image-title').html(
						input.files[0].name);
				};

				reader.readAsDataURL(input.files[0]);

			} else {
				removeUpload();
			}
		}

		var mrowCountsign =0;
		function rowaddsign() {  
			 if (mrowCountsign < 3) {
			
			var table = document.getElementById("click1"); 
			var row = table.insertRow(); 
			//var cell1 = row.insertCell(); 
			var cell2 = row.insertCell(); 
			var cell3 = row.insertCell(); 
			var cell4 = row.insertCell(); 
			var cell5 = row.insertCell(); 
			var cell6 = row.insertCell(); 
			var cell7 = row.insertCell(); 
			var cell8 = row.insertCell();  
			var cell9 = row.insertCell(); 
			 
			//cell1.innerHTML = '<input type="checkbox"' + mrowCount + '">'; 
			cell2.innerHTML = '<input  type="text"  name="docType" id="docType1' + mrowCount + '">'; 
			cell3.innerHTML = '<input type="text" name="docCode" id="docCode1' + mrowCount + '">'; 
			cell4.innerHTML = '<input type="text" name="docDesc" id="docDesc1' + mrowCount + '">'; 
			cell5.innerHTML = '<input type="text" name="uniqId" id="uniqId1' + mrowCount + '">'; 
			cell6.innerHTML = '<input type="text" name="docIssPlace" id="docIssPlace1' + mrowCount + '">'; 
			cell7.innerHTML = '<input type="date" name="docIssDate"   id="docIssDate1' + mrowCount + '">';  
			cell8.innerHTML = '<input type="date" name="docExpDate"  id="docExpDate1' + mrowCount + '">'; 
			cell9.innerHTML = '<input type="file" name="docExpDate" id="file' + mrowCount + '">'; 
			mrowCount++ 
			 }else{
				 //  alert("You can only add up to 5 rows.");
			 }
		}
		
/* 		var mrowCount = 0;

		function rowadd() {
		    // Allow up to 3 rows (0, 1, 2)
		    if (mrowCount < 3) {
		        $.ajax({
		            type: 'POST',
		            url: './DocumenCall',
		            success: function (response) {
		                var table = document.getElementById("click1");
		                var row = table.insertRow();

		                // Create cells
		                var cell2 = row.insertCell();
		                var cell3 = row.insertCell();
		                var cell4 = row.insertCell();
		                var cell5 = row.insertCell();
		                var cell6 = row.insertCell();
		                var cell7 = row.insertCell();
		                var cell8 = row.insertCell();
		                var cell9 = row.insertCell();

		                // Populate the dropdown from response with description
		                cell2.innerHTML = '<select id="docType1' + mrowCount + '" class="uniform-input pl-2" style="height: 24px">' +
		                    '<option value="">SELECT</option>' +
		                    response.map(city => {
		                        // Create the display text with description
		                        let displayText = '';
		                        if (city.ref_id === 'NIC') {
		                            displayText = 'NIC - Net Interest Cost';
		                        } else if (city.ref_id === 'POA') {
		                            displayText = 'POA - Power of Attorney';
		                        } else {
		                            displayText = city.ref_id; // Default to ref_id if no special description
		                        }
		                        return '<option value="' + city.ref_id + '">' + displayText + '</option>';
		                    }).join('') +
		                    '</select>';

		                // Other input fields
		                cell3.innerHTML = '<input type="text" name="docCode" id="docCode1' + mrowCount + '" class="uniform-input">';
		                cell4.innerHTML = '<input type="text" name="docDesc" id="docDesc1' + mrowCount + '" class="uniform-input">';
		                cell5.innerHTML = '<input type="text" name="uniqId" id="uniqId1' + mrowCount + '" class="uniform-input">';
		                cell6.innerHTML = '<input type="text" name="docIssPlace" id="docIssPlace1' + mrowCount + '" class="uniform-input">';
		                cell7.innerHTML = '<input type="date" name="docIssDate" id="docIssDate1' + mrowCount + '" class="uniform-input">';
		                cell8.innerHTML = '<input type="date" name="docExpDate" id="docExpDate1' + mrowCount + '" class="uniform-input">';
		                cell9.innerHTML = '<input type="file" name="docExpDate" id="file' + mrowCount + '" onchange="readURL(this);">'; // Changed name to 'docFile'

		                // Increment the row count
		                mrowCount++;
		            },
		            error: function (xhr, status, error) {
		                console.error("Error occurred: " + status + " " + error);
		            }
		        });
		    } else {
		        alert("You can only add up to 3 rows.");
		    }
		} */

		var mrowCount =0;
		function rowadd() {  
			 if (mrowCount < 3) {
			
			var table = document.getElementById("click1"); 
			var row = table.insertRow(); 
			//var cell1 = row.insertCell(); 
			var cell2 = row.insertCell(); 
			var cell3 = row.insertCell(); 
			var cell4 = row.insertCell(); 
			var cell5 = row.insertCell(); 
			var cell6 = row.insertCell(); 
			var cell7 = row.insertCell(); 
			var cell8 = row.insertCell();  
			var cell9 = row.insertCell(); 
			 
			//cell1.innerHTML = '<input type="checkbox"' + mrowCount + '">'; 
				/* cell2.innerHTML = '<select name="docType" id="docType1' + mrowCountcor + '" name="docType" class="uniform-input pl-2" style="height: 24px">' +
         '<option value="">SELECT</option>' +
         '<option  value="NIC">NIC - Net Interest Cost</option>' + 
         '<option value="POA" >POA - Power of Attorney</option>' +
         '</select>';
 */         
         cell2.innerHTML = '<input type="text" name="docType" id="docType1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">';
        	cell3.innerHTML = '<input type="text" name="docCode" id="docCode1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">';
			cell4.innerHTML = '<input type="text" name="docDesc" id="docDesc1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
			cell5.innerHTML = '<input type="text" name="uniqId" id="uniqId1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
			cell6.innerHTML = '<input type="text" name="docIssPlace" id="docIssPlace1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
			cell7.innerHTML = '<input type="date" name="docIssDate"   id="docIssDate1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">';  
			cell8.innerHTML = '<input type="date" name="docExpDate"  id="docExpDate1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
			cell9.innerHTML = '<input type="file" name="docExpDate" id="file' + mrowCount + '" onchange="readURL(this);">'; 
			mrowCount++ 
			 }else{
				   alert("You can only add up to 5 rows.");
			 }
		}
		function rowdelete(ele) { 
			var table = $('#click1')[0]; 
			var rowCount = table.rows.length; 
			console.log(rowCount); 
			if (rowCount <= 1) { 
				//alert("There is no row available to delete!"); 
				return; 
			} 
			if (ele) { 
				$(ele).parent().parent().remove(); 
			} 
			else { 
				table.deleteRow(rowCount - 1);  
			} 
		}


		function custgrpclck() {

			var grp = document.getElementById("cust_grp").value;
			var type = document.getElementById("acc_type").value;

			var fieldOption1 = document.getElementById('RetailDetail'); //	
			var fieldOption2 = document.getElementById('CorporateDetail');// INDIVIDUAL

			var fieldOption3 = document.getElementById('Joint_Account_Retail');
			var fieldOption4 = document.getElementById('Joint_Account_Corporate');
			var showcorporate = document.getElementById('showcorporate');
			var type1 = document.getElementById("acc_type");
			// fieldOption1.style.display = 'none';
			fieldOption2.style.display = 'none';
			//fieldOption3.style.display = 'none';
			//fieldOption4.style.display = 'none';
			if (grp == "RETAIL" && type == "INDIVIDUAL") {

				fieldOption1.style.display = "block"
				fieldOption2.style.display = "none"
				fieldOption3.style.display = "none"
				fieldOption4.style.display = "none"
					showcorporate.style.display = "none"

			} else if (grp == "CORPORATE CUSTOMER" && type == "INDIVIDUAL") {

				fieldOption1.style.display = "none"
				fieldOption2.style.display = "block"
				fieldOption3.style.display = "none"
				fieldOption4.style.display = "none"
					showcorporate.style.display = "none"
			} else if (grp == "RETAIL" && type == "JOINT ACCOUNT") {

				fieldOption1.style.display = "none"
				fieldOption2.style.display = "none"
				fieldOption3.style.display = "block"
				fieldOption4.style.display = "none"
					showcorporate.style.display = "none"

			} else if (grp == "CORPORATE CUSTOMER" && type == "JOINT ACCOUNT") {

				fieldOption1.style.display = "none"
				fieldOption2.style.display = "none"
				fieldOption3.style.display = "none"
				fieldOption4.style.display = "block"
					showcorporate.style.display = "none"
			}else if(grp == "CORPORATE CUSTOMER" ){
				        type1.style.display = "none"
				     	fieldOption1.style.display = "none"
						fieldOption2.style.display = "block"
						fieldOption3.style.display = "none"
						fieldOption4.style.display = "none"
						showcorporate.style.display = "block"
			}else if (grp == "RETAIL" ) {

				fieldOption1.style.display = "block"
				fieldOption2.style.display = "none"
				fieldOption3.style.display = "none"
				fieldOption4.style.display = "none"
				showcorporate.style.display = "none"
					 type1.style.display = "block"
			}
		}

		function viewCorporate() {
		//	alert("corporate")
		}


function nop() {
    var a = document.getElementById("noOfper").value;
    document.getElementById("listsize").innerHTML = a;
}

	</script>

<script>

		function nextPage() {


			// const count = document.getElementById("counts11").value;
			//alert(count)

			const numberElement = document.getElementById("numberone");
			const currentElement = document.getElementById("numberone").textContent;
			const totalvalue = document.getElementById("totalvalue").textContent;
			//alert(totalvalue)
			//alert(currentElement)
			if (currentElement == totalvalue) {
				alert("The value is same")
			} else {
				alert("next")
				if (currentPage < formPages.length - 1) {
					saveFormData(); // Save the current form data
					currentPage++;
					updateFormFields();
				}
				let currentNumber = currentElement;
				currentNumber++;
				numberElement.textContent = currentNumber;
			}

		}

		function saveFormData() {
			const pageData = formPages[currentPage];
			pageData.ca_saluation = document.getElementById('ca_saluation').value;
			pageData.firstname = document.getElementById('firstname').value;
			pageData.middlename = document.getElementById('middlename').value;
			pageData.shortname = document.getElementById('shortname').value;
			pageData.lastname = document.getElementById('lastname').value;
			pageData.fullname = document.getElementById('fullname').value;
			pageData.ca_occupation1 = document.getElementById('ca_occupation1').value;
			pageData.ca_gender = document.getElementById('ca_gender').value;
			pageData.ca_martial_staus = document.getElementById('ca_martial_staus').value;
			pageData.DOB = document.getElementById('DOB').value;
			pageData.ca_address_type = document.getElementById('ca_address_type').value;
			pageData.houseno = document.getElementById('houseno').value;
			pageData.streetno = document.getElementById('streetno').value;
			pageData.streetname = document.getElementById('streetname').value;
			pageData.ca_country = document.getElementById('ca_country').value;
			pageData.ca_state = document.getElementById('ca_state').value;
			pageData.ca_city = document.getElementById('ca_city').value;
			pageData.postalcode = document.getElementById('postalcode').value;
			pageData.addvalfrom = document.getElementById('addvalfrom').value;
			pageData.ca_nationality = document.getElementById('ca_nationality').value;
			pageData.ca_country_of_birth = document.getElementById('ca_country_of_birth').value;
			pageData.emailid = document.getElementById('emailid').value;
			pageData.mobno = document.getElementById('mobno').value;
			pageData.phoneno = document.getElementById('phoneno').value;

			pageData.schemetype = document.getElementById('schemetype').value;
			pageData.schemecode = document.getElementById('schemecode').value;
			pageData.currency = document.getElementById('currency').value;
			pageData.glheadcode = document.getElementById('glheadcode').value;
			pageData.prisolid = document.getElementById('prisolid').value;
			pageData.nationalid = document.getElementById('nationalid').value;
			pageData.issuedate = document.getElementById('issuedate').value;
			pageData.passno = document.getElementById('passno').value;
			pageData.expdate = document.getElementById('expdate').value;
			pageData.Nonresi = document.getElementById('Nonresi').value;
			pageData.Staffindi = document.getElementById('Staffindi').value;
			pageData.trdfin = document.getElementById('trdfin').value;
			pageData.monindi = document.getElementById('monindi').value;

			pageData.docType0 = document.getElementById('docType0').value;
			pageData.docCode0 = document.getElementById('docCode0').value;
			pageData.docDesc0 = document.getElementById('docDesc0').value;
			pageData.uniqId0 = document.getElementById('uniqId0').value;
			pageData.docIssPlace0 = document.getElementById('docIssPlace0').value;
			pageData.docIssDate0 = document.getElementById('docIssDate0').value;
			pageData.docExpDate0 = document.getElementById('docExpDate0').value;
			pageData.file0 = document.getElementById('file0').value;
			pageData.docType1 = document.getElementById('docType1').value;
			pageData.docCode1 = document.getElementById('docCode1').value;
			pageData.docDesc1 = document.getElementById('docDesc1').value;
			pageData.uniqId1 = document.getElementById('uniqId1').value;
			pageData.docIssPlace1 = document.getElementById('docIssPlace1').value;
			pageData.docIssDate1 = document.getElementById('docIssDate1').value;
			pageData.docExpDate1 = document.getElementById('docExpDate1').value;
			pageData.file1 = document.getElementById('file1').value;

			pageData.imgaccesscode = document.getElementById('imgaccesscode').value;
			pageData.group = document.getElementById('group').value;
			pageData.keyword = document.getElementById('keyword').value;
			pageData.signatureown = document.getElementById('signatureown').src;
			pageData.barathphoto = document.getElementById('barathphoto').src;
		}
		const form = document.getElementById('myForm');
		const prevButton = document.getElementById('prevBtn');
		const nextButton = document.getElementById('nextBtn');

		var currentPage = 0;
		const formPages = [
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			},
			{
				ca_saluation: '', firstname: '', middlename: '', shortname: '', lastname: '', fullname: '', ca_occupation1: '', ca_gender: '', ca_martial_staus: '', DOB: '', ca_address_type: '', houseno: '', streetno: '',
				streetname: '', ca_country: '', ca_state: '', ca_city: '', postalcode: '', addvalfrom: '', ca_nationality: '', ca_country_of_birth: '', emailid: '', mobno: '', phoneno: '',
				schemetype: '', schemecode: '', currency: '', glheadcode: '', prisolid: '', nationalid: '', issuedate: '', passno: '', expdate: '', Nonresi: '', Staffindi: '', trdfin: '', monindi: '',
				docType0: '', docCode0: '', docDesc0: '', uniqId0: '', docIssPlace0: '', docIssDate0: '', docExpDate0: '', file0: '',
				docType1: '', docCode1: '', docDesc1: '', uniqId1: '', docIssPlace1: '', docIssDate1: '', docExpDate1: '', file1: '',
				imgaccesscode: '', group: '', keyword: '', signatureown: '', barathphoto: ''
			}
		];

		function updateFormFields() {
			const pageData = formPages[currentPage];
			/* 
			 lastname: '',fullname: '',ca_occupation1: '',ca_gender: '',ca_martial_staus: '',DOB: '', ca_address_type: '',houseno: '',streetno: '',
			 streetname: '',ca_country: '',ca_state: '',ca_city: '',postalcode: '',addvalfrom: '',ca_nationality: '',ca_country_of_birth: '',emailid: '',mobno: '',phoneno: '',
			 schemetype: '',schemecode: '',currency: '',glheadcode: '',prisolid: '',nationalid: '',issuedate: '',passno: '',expdate: '',Nonresi: '',Staffindi: '',trdfin: '',monindi: '',
			 docType0: '',docCode0: '',docDesc0: '',uniqId0: '',docIssPlace0: '',docIssDate0: '',docExpDate0: '',file0: '',
			 docType1: '',docCode1: '',docDesc1: '',uniqId1: '',docIssPlace1: '',docIssDate1: '',docExpDate1: '',file1: '',
			 imgaccesscode: '',group: '',keyword: '',photo: '',photo1: ''
			  */

			document.getElementById('ca_saluation').value = pageData.ca_saluation;
			document.getElementById('firstname').value = pageData.firstname;
			document.getElementById('middlename').value = pageData.middlename;
			document.getElementById('shortname').value = pageData.shortname;
			document.getElementById('lastname').value = pageData.lastname;
			document.getElementById('fullname').value = pageData.fullname;
			document.getElementById('ca_occupation1').value = pageData.ca_occupation1;
			document.getElementById('ca_gender').value = pageData.ca_gender;
			document.getElementById('ca_martial_staus').value = pageData.ca_martial_staus;
			document.getElementById('DOB').value = pageData.DOB;
			document.getElementById('ca_address_type').value = pageData.ca_address_type;
			document.getElementById('houseno').value = pageData.houseno;
			document.getElementById('streetno').value = pageData.streetno;
			document.getElementById('streetname').value = pageData.streetname;
			document.getElementById('ca_country').value = pageData.ca_country;
			document.getElementById('ca_state').value = pageData.ca_state;
			document.getElementById('ca_city').value = pageData.ca_city;
			document.getElementById('postalcode').value = pageData.postalcode;
			document.getElementById('addvalfrom').value = pageData.addvalfrom;
			document.getElementById('ca_nationality').value = pageData.ca_nationality;
			document.getElementById('ca_country_of_birth').value = pageData.ca_country_of_birth;
			document.getElementById('emailid').value = pageData.emailid;
			document.getElementById('mobno').value = pageData.mobno;
			document.getElementById('phoneno').value = pageData.phoneno;

			document.getElementById('schemetype').value = pageData.schemetype;
			document.getElementById('schemecode').value = pageData.schemecode;
			document.getElementById('currency').value = pageData.currency;
			document.getElementById('glheadcode').value = pageData.glheadcode;
			document.getElementById('prisolid').value = pageData.prisolid;
			document.getElementById('nationalid').value = pageData.nationalid;
			document.getElementById('issuedate').value = pageData.issuedate;
			document.getElementById('passno').value = pageData.passno;
			document.getElementById('expdate').value = pageData.expdate;
			document.getElementById('Nonresi').value = pageData.Nonresi;
			document.getElementById('Staffindi').value = pageData.Staffindi;
			document.getElementById('trdfin').value = pageData.trdfin;
			document.getElementById('monindi').value = pageData.monindi;

			document.getElementById('docType0').value = pageData.docType0;
			document.getElementById('docCode0').value = pageData.docCode0;
			document.getElementById('docDesc0').value = pageData.docDesc0;
			document.getElementById('uniqId0').value = pageData.uniqId0;
			document.getElementById('docIssPlace0').value = pageData.docIssPlace0;
			document.getElementById('docIssDate0').value = pageData.docIssDate0;
			document.getElementById('docExpDate0').value = pageData.docExpDate0;
			document.getElementById('file0').value = pageData.file0;
			document.getElementById('docType1').value = pageData.docType1;
			document.getElementById('docCode1').value = pageData.docCode1;
			document.getElementById('docDesc1').value = pageData.docDesc1;
			document.getElementById('uniqId1').value = pageData.uniqId1;
			document.getElementById('docIssPlace1').value = pageData.docIssPlace1;
			document.getElementById('docIssDate1').value = pageData.docIssDate1;
			document.getElementById('docExpDate1').value = pageData.docExpDate1;
			document.getElementById('file1').value = pageData.file1;

			document.getElementById('imgaccesscode').value = pageData.imgaccesscode;
			document.getElementById('group').value = pageData.group;
			document.getElementById('keyword').value = pageData.keyword;
			document.getElementById('signatureown').src = pageData.signatureown;
			document.getElementById('barathphoto').src = pageData.barathphoto;
		}

		function prevPage() {


			const numberElement = document.getElementById("numberone");
			const currentElement = document.getElementById("numberone").textContent;
			//alert(currentElement)
			if (currentElement == "1") {
				alert("The value is same")
			} else {
				alert("back")
				if (currentPage > 0) {
					saveFormData(); // Save the current form data
					currentPage--;
					updateFormFields();
				}
				let currentNumber = currentElement;
				currentNumber--;
				numberElement.textContent = currentNumber;


			}
		}
	</script>
<script>

/* function submitfile(value) {
	if (($("#docType0").val() == "") || ($("#docCode0").val() == "") || ($("#docDesc0").val() == "")
		|| ($("#uniqId0").val() == "") || ($("#docIssPlace0").val() == "") || ($("#docIssDate0").val() == "")
		|| ($("#docExpDate0").val() == "")) {
		alert("please file the required field");
	} else {
		var rec_no = document.getElementById('numberone').textContent;
	 
		var appl_ref_no = value.getAttribute("data-refnumber")
		alert(appl_ref_no);

		console.log(" ##### ", $("#dynamicTable"));
		
		const table = document.getElementById("dynamicTable").getElementsByTagName('tbody')[0];
		console.log(" table ", document.getElementById("dynamicTable"));
		
		const rows = table.getElementsByTagName('tr');
		const dynamicvalues = [];
		const imageValues = [];
		console.log(" rows ", rows);
		
		console.log(rows.length);
		
		for (let i = 0; i < rows.length; i++) {
			console.log(" rows[i] ", rows[i]);
			
			const row = rows[i];
			const inputs = row.getElementsByTagName('input');
			imageValues.push(inputs[7].files[0]);
			console.log("INPUT PUSH VALUE.. "+inputs[7].files[0].name);
			console.log("FILE NAME .. "+inputs[7].files[0]);
		

			//imageValues.push("C:/Users/user/Pictures/Screenshots/Screenshot (139).png");

			if (inputs[7] && inputs[7].files.length > 0) {
	const value = inputs[7].value;
	var a = value.split("\\");
	const lastValue = a[a.length - 1];
	
			const rowData = {
				doctype: inputs[0].value,
				doccode: inputs[1].value,
				doctypesesc: inputs[2].value,
				uniqueid: inputs[3].value,
				placeofissue: inputs[4].value,
				issuedate: inputs[5].value,
				exprydate: inputs[6].value,
				file: inputs[7].files[0],
				filename: lastValue

				// To get the file object

			};
			dynamicvalues.push(rowData);
			}
		}
		console.log(JSON.stringify(imageValues));
		

		 $.ajax({
			url: '/BGLS/multiline?appl_ref_no=' + appl_ref_no + "&rec_no=" + rec_no,
			data: JSON.stringify(dynamicvalues),
			type: 'POST',
			contentType: 'application/json',
			success: function (data) {
			   imageuploadFunction(data, dynamicvalues, appl_ref_no);
				openCity(event, 'india');
			}
		}); 
		 
	}
} */

function submitfile(value) {
    // Check if required fields are filled for both rows
    alert("hi");
    let allFilled = true;
    $("#click1 tr").each(function() {
        if ($(this).find("input[name='appl_ref_no']").val() == "" ||
        		$(this).find("input[name='docType']").val() == "" ||
            $(this).find("input[name='docCode']").val() == "" || 
            $(this).find("input[name='docDesc']").val() == "" || 
            $(this).find("input[name='uniqId']").val() == "" || 
            $(this).find("input[name='docIssPlace']").val() == "" || 
            $(this).find("input[name='docIssDate']").val() == "" || 
            $(this).find("input[name='docExpDate']").val() == "") {
            allFilled = false; // Mark as not all fields are filled
            return false; // Exit the loop early
        }
    });

    if (!allFilled) {
        alert("Please fill all the required fields in both rows.");
        return; // Exit the function if not all fields are filled
    }

  //  var rec_no = document.getElementById('numberone').textContent;
  var rec_no="1";
    var appl_ref_no = value.getAttribute("data-refnumber");

    const dynamicValues = []; // Initialize the array here

    // Loop through each row in the tbody with id "click1"
    $("#click1 tr").each(function() {
        var row = {}; // Create an object to hold the data for this row

        // Get values from the current row
        row.appl_ref_no = $(this).find("input[name='appl_ref_no']").val(); 
        row.doctype = $(this).find("input[name='docType']").val(); // Use select directly
        row.doccode = $(this).find("input[name='docCode']").val();
        row.doctypesesc = $(this).find("input[name='docDesc']").val();
        row.uniqueid = $(this).find("input[name='uniqId']").val();
        row.placeofissue = $(this).find("input[name='docIssPlace']").val();
        row.issuedate = $(this).find("input[name='docIssDate']").val();
        row.exprydate = $(this).find("input[name='docExpDate']").val();

        // Get the file input and extract the filename
        const fileInput = $(this).find("input[type='file']"); // Adjust selector as necessary
        if (fileInput.length > 0 && fileInput[0].files.length > 0) {
            const file = fileInput[0].files[0]; // Get the file object
            row.file = file; // Set the file object in the row
            row.filename = file.name; // Get the filename directly from the file object
        }

        dynamicValues.push(row); // Push the row object to the dynamicValues array
    });

    console.log(dynamicValues);

    // AJAX request to submit data
  $.ajax({
        url: '/BGLS/multilinetest?appl_ref_no=' + appl_ref_no + "&rec_no=" + rec_no,
        data: JSON.stringify(dynamicValues),
        type: 'POST',
        contentType: 'application/json',
        success: function(data) {
            imageuploadFunction(data, dynamicValues, appl_ref_no);
           
        }
    }); 
}


function submitfileCorporate(value) {


    var rec_no = document.getElementById('nopfperson').textContent;
   // var numberElement = parseInt(document.getElementById("nopfperson").innerText);
    var appl_ref_no = value.getAttribute("data-refnumber");

    const dynamicValues = []; // Initialize the array here

    // Loop through each row in the tbody with id "click1"
    $("#click1 tr").each(function() {
        var row = {}; // Create an object to hold the data for this row

        // Get values from the current row
        row.doctype = $(this).find("select[name='docType']").val(); // Use select directly
        row.doccode = $(this).find("input[name='docCode']").val();
        row.doctypesesc = $(this).find("input[name='docDesc']").val();
        row.uniqueid = $(this).find("input[name='uniqId']").val();
        row.placeofissue = $(this).find("input[name='docIssPlace']").val();
        row.issuedate = $(this).find("input[name='docIssDate']").val();
        row.exprydate = $(this).find("input[name='docExpDate']").val();

        // Get the file input and extract the filename
        const fileInput = $(this).find("input[type='file']"); // Adjust selector as necessary
        if (fileInput.length > 0 && fileInput[0].files.length > 0) {
            const file = fileInput[0].files[0]; // Get the file object
            row.file = file; // Set the file object in the row
            row.filename = file.name; // Get the filename directly from the file object
        }

        dynamicValues.push(row); // Push the row object to the dynamicValues array
    });

    console.log(dynamicValues);

    // AJAX request to submit data
  $.ajax({
        url: '/BGLS/multiline?appl_ref_no=' + appl_ref_no + "&rec_no=" + rec_no,
        data: JSON.stringify(dynamicValues),
        type: 'POST',
        contentType: 'application/json',
        success: function(data) {
            imageuploadFunction(data, dynamicValues, appl_ref_no);
           
        }
    }); 
}
	</script>
<script type="text/javascript">
/* function imageuploadFunction(Responcedata, dynamicvalues, appl_ref_no) { 
    // Loop through each file in dynamicvalues
    dynamicvalues.forEach((value, index) => {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var img = new Image();
        
        // Create a URL for the file object
        img.src = URL.createObjectURL(value.file);
        
        img.onload = function () {
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            var dataURL = canvas.toDataURL('image/jpeg');
            
            var formData = new FormData();
            
            // Append each file to formData
            dynamicvalues.forEach((item) => {
                formData.append("files", item.file);
            });
            
            // Append other necessary data
            formData.append("unique", Responcedata);
            formData.append("appl_ref_no", appl_ref_no);
            formData.append("dataURL", dataURL);
console.log(formData);
            // Perform the AJAX request
         $.ajax({
                url: '/BGLS/imageupload11',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                	  // Insert the response into the modal-body
	                $("#mypopup2 .modal-body").html(response); 
	                $('#mypopup2').modal('show');
                }
            });
        };
    });
} */

function imageuploadFunction(Responcedata, dynamicvalues, appl_ref_no) {
    var formData = new FormData(); // Create FormData outside the loop
    formData.append("unique", Responcedata);

    // Function to process a single image and return a promise
    function processImage(value) {
        return new Promise((resolve, reject) => {
            if (!value.file) {
                console.error("File object is invalid:", value);
                return reject("Invalid file");
            }

            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            var img = new Image();

            // Log file details for debugging
            console.log("Processing file:", value.file);

            try {
                img.src = URL.createObjectURL(value.file); // Ensure value.file is valid
            } catch (e) {
                console.error("Error creating object URL:", e);
                return reject(e); // Reject the promise in case of failure
            }

            img.onload = function () {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                var dataURL = canvas.toDataURL('image/jpeg');

                // Resolve the promise with the image dataURL and original file
                resolve({ file: value.file, dataURL: dataURL });
            };

            img.onerror = function (error) {
                console.error("Error loading image:", error);
                reject(error); // Reject the promise in case of image loading failure
            };
        });
    }

    // Process all images and wait for completion
    Promise.all(dynamicvalues.map(processImage)).then((results) => {
        // After all images are processed, append them to formData
        results.forEach((result) => {
            formData.append("files", result.file);   // Append the original file
            formData.append("dataURL", result.dataURL); // Append the processed dataURL
        });

        // Append other necessary data
        formData.append("appl_ref_no", appl_ref_no);

        // Log formData entries for debugging
        for (var pair of formData.entries()) {
            console.log(pair[0] + ': ' + pair[1]);
        }

        // Make a single AJAX call after all images have been added to formData
        $.ajax({
            url: '/BGLS/imageupload11',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                // Insert the response into the modal-body
                $("#mypopup2 .modal-body").html(response); 
                $('#mypopup2').modal('show');
            }
        });
    }).catch((error) => {
        console.error('Error processing images:', error);
    });
}


</script>

<script>
		$(document).ready(function () {



			$("#btnrejet").click(function () {
				$(".container1").modal('toggle');
				$("#btnRsubmit").show();
				$("#btnHsubmit").hide();
				$("#remarks").focus();
			});

			$("#btnRsubmit").on("click", function () {
				if (!$("#remarks").val()) {
					alert("Please fill out remarks");
					return false;
				} else {
					MinimalForm.action = "minimaldatarej.action?method=rejectMinimalData";
					MinimalForm.submit();
				}
			});

			$("#btnclose").on("click", function () {
				$("#remarks").val("");
				$('.container1').modal('toggle');
			});

		});

	</script>

<script>
		$('#tabs').on('click', '.tablink,#prodTabs a', function (e) {
			e.preventDefault();
			var url = $(this).attr("data-url");

			if (typeof url !== "undefined") {
				var pane = $(this), href = this.hash;

				// ajax load from data-url
				$(href).load(url, function (result) {
					pane.tab('show');
				});
			} else {
				$(this).tab('show');
			}
		});

		function removeUpload(input) {
			Thisinput.closest('.file-upload').find('.file-upload-input')
				.replaceWith($('.file-upload-input').clone());
			Thisinput.closest('.file-upload').find('.file-upload-content').hide();
			Thisinput.closest('.file-upload').find('.image-upload-wrap').show();
		}

		function submitdoc() {
			//alert("Hlo")
			var name = document.getElementById("doc_type").value;
		//	alert(name)

			$.ajax({
				url: './AddAlert',
				data: $("#upon").serialize(),
				type: 'POST',
				success: function (data) {
					alert("saved successfully");
				}
			});
		}
	</script>
<style>
</style>
<script>
		function personaldet() {
			var vv = "333"
			alert(vv);
			$.ajax({
				type: "POST",
				url: "./AddAlert",
				data: $("#Proceedform").serialize(),
				success: function (response) {
					alert(Response);
				}
			})
		}
	</script>

<script>

		function submite() {
			var appl_ref_no = "ARN02031";
			var signatureFile = document.getElementById("barathsign").files[0];
			var photoFile = document.getElementById("barathphoto").files[0];
			var sign = "barathsign";
			var photo = "barathphoto";
			alert(barathsign)
			alert(barathphoto)// Replace with the actual value of the photo

			var formData = new FormData();
			formData.append("appl_ref_no", appl_ref_no);
			formData.append("signatureFile", signatureFile);
			formData.append("photoFile", photoFile); // Use "photoFile" for the photo
			formData.append("sign", sign);
			formData.append("photo", photo);

			$.ajax({
				type: 'POST',
				url: './AddStudentss',
				data: formData,
				contentType: false,
				processData: false,
				success: function (response) {
					alert(response);
					console.log(response);
					alert("Signature and photo uploaded successfully");
				},
				error: function (xhr, status, error) {
					console.error("Error: " + error);
					alert("Error uploading signature and photo");
				}
			});
		}

	</script>


<script>
function personalDetailNxt(a) {
	   var hasError = false;

	   if ($("#monthly_income").val() === "") {
	        showError($("#monthly_income"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#monthly_income"));
	    }
	   
	    if ($("#annual_income").val() === "") {
	        showError($("#annual_income"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#annual_income"));
	    }
	    if ($("#cust_type").val() === "") {
	        showError($("#cust_type"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#cust_type"));
	    }

	    if ($("#ca_saluation").val() === "") {
	        showError($("#ca_saluation"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_saluation"));
	    }

	    if ($("#firstname").val() === "") {
	        showError($("#firstname"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#firstname"));
	    }

	    if ($("#fullname").val() === "") {
	        showError($("#fullname"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#fullname"));
	    }

	    // Validate occupation select
	    if ($("#ca_occupation1").val() === "SELECT") {
	        showError($("#ca_occupation1"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_occupation1"));
	    }
 
	    // Validate occupation select
	    if ($("#ca_gender").val() === "SELECT") {
	        showError($("#ca_gender"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_gender"));
	    }

	    if ($("#ca_martial_staus").val() === "SELECT") {
	        showError($("#ca_martial_staus"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_martial_staus"));
	    }

	    if ($("#DOB").val() === "") {
	        showError($("#DOB"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#DOB"));
	    }

	    if ($("#ca_address_type").val() === "SELECT") {
	        showError($("#ca_address_type"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_address_type"));
	    } 

	    if ($("#houseno").val() === "") {
	        showError($("#houseno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#houseno"));
	    }

	    if ($("#streetno").val() === "") {
	        showError($("#streetno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#streetno"));
	    }

	    if ($("#streetname").val() === "") {
	        showError($("#streetname"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#streetname"));
	    }

	    if ($("#ca_country").val() === "SELECT") {
	        showError($("#ca_country"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_country"));
	    }

	    if ($("#ca_city").val() === "SELECT") {
	        showError($("#ca_city"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_city"));
	    }

	    if ($("#addvalfrom").val() === "") {
	        showError($("#addvalfrom"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#addvalfrom"));
	    } 

	    if ($("#ca_nationality").val() === "SELECT") {
	        showError($("#ca_nationality"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_nationality"));
	    }

	    if ($("#ca_country_of_birth").val() === "SELECT") {
	        showError($("#ca_country_of_birth"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_country_of_birth"));
	    }

	    if ($("#emailid").val() === "") {
	        showError($("#emailid"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#emailid"));
	    }

	    if ($("#mobno").val() === "") {
	        showError($("#mobno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#mobno"));
	    }

	    // Display alert only if there are errors
	    if (hasError) {
	    	$('#myrequired').modal("toggle");
			$('#myrequired .modal-body').text("Enter the Required fields...!");
	    } else {
	
    var rec_no = document.getElementById('numberone').textContent;
    var refnumber = a.getAttribute("data-refnumber");

   
    // If all validations pass,  with the AJAX request
  $.ajax({
    type: "POST",
    url: './personalDetail?refnumber=' + refnumber + "&rec_no=" + rec_no,
    data: $("#Londonone").serialize(),
    success: function (response) { 
        $("#mypopup .modal-body").html(response); 
        $('#mypopup').modal('show');
    }
});

 
	    }
} 

function personalDetailNxtCorporate(a){
	
    var rec_no = document.getElementById('nopfperson').textContent;
    var refnumber = a.getAttribute("data-refnumber");
    
	  $.ajax({
		    type: "POST",
		    url: './personalDetail?refnumber=' + refnumber + "&rec_no=" + rec_no,
		    data: $("#Londonone").serialize(),
		    success: function (response) {
		        // Insert the response into the modal-body
		        $("#mypopup .modal-body").html(response);

		        // Show the modal
		        $('#mypopup').modal('show');
		    }
		});
}
function showError(element, message) {
    // Check if an error message span already exists, if not create one
    if (!element.next('.error-message').length) {
        // Create a new span element to hold the error message
        var errorSpan = $('<span class="error-message"></span>').text(message);

        // Apply styling for the error message (red color)
        errorSpan.css('color', 'red');

        // Append the error message span after the input field
        element.after(errorSpan);
    }
} 
</script>
<script>
	
	function AccountDetailNxt(a) {
	    // Check if the required fields are not empty
	    var hasError = false;

	    if ($("#schemetype").val() === "") {
	        showError($("#schemetype"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#schemetype"));
	    }

	    if ($("#schemecode").val() === "") {
	        showError($("#schemecode"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#schemecode"));
	    }

	    if ($("#currency").val() === "") {
	        showError($("#currency"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#currency"));
	    }

	    if ($("#glheadcode").val() === "") {
	        showError($("#glheadcode"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#glheadcode"));
	    }

	    if ($("#prisolid").val() === "") {
	        showError($("#prisolid"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#prisolid"));
	    }

	    if ($("#nationalid").val() === "") {
	        showError($("#nationalid"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#nationalid"));
	    }

	    if ($("#issuedate").val() === "") {
	        showError($("#issuedate"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#issuedate"));
	    }

	    if ($("#passno").val() === "") {
	        showError($("#passno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#passno"));
	    }

	    if ($("#expdate").val() === "") {
	        showError($("#expdate"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#expdate"));
	    }

	    // Display alert only if there are errors
	    if (hasError) {
	    	$('#myrequired').modal("toggle");
			$('#myrequired .modal-body').text("Enter the Required fields...!");
	    } else {
	        var refnumber = a.getAttribute("data-refnumber");

	        $.ajax({
	            type: "POST",
	            url: "./AccountDetailNxt?refnumber=" + refnumber,
	            data: $("#parisone").serialize(),
	            success: function (response) {
	            	if($("#schemetype").val()==="LA"){
	            		addRecords();
	            	}else{
	            		depositadd();
	            	}
	            	
	            	
	                // Insert the response into the modal-body
	                $("#mypopup1 .modal-body").html(response);

	                // Show the modal
	                $('#mypopup1').modal('show');

	            }
	        })

	       
	    }
	}
	function depositadd() {
		const depo = document.getElementById("depo_actno").value.trim();
		const deposit_date = document.getElementById("deposit_date").value.trim();
		const deposit_amt = document.getElementById("deposit_amt").value.trim();
		const currency = document.getElementById("currency").value.trim();
		const deposit_period = document.getElementById("deposit_period").value.trim();
		const maturity_date = document.getElementById("maturity_date").value.trim();
		const rate_of_int  = document.getElementById("rate_of_int").value.trim();
		const int_amt = document.getElementById("int_amt").value.trim();
		const maturity_amt  = document.getElementById("maturity_amt").value.trim();
		const deposit_type = document.getElementById("deposit_type").value.trim();
		const frequency = document.getElementById("frequency").value.trim();
		const glshdesc = document.getElementById("glshdesc").value.trim();
		const ca_glcode = document.getElementById("ca_glcode").value.trim();
		const branch_desc= document.getElementById("branchdesc").value.trim();
	const ca_solid = document.getElementById("cif_id").value.trim();
	const scheme_code = document.getElementById("schmcode").value.trim();

	var Deposit = {
			depo_actno : depo,
			deposit_date:deposit_date,
			deposit_amt:deposit_amt,
			currency:currency,
			deposit_period:deposit_period,
			maturity_date:maturity_date,
			rate_of_int:rate_of_int,
			int_amt:int_amt,
			maturity_amt:maturity_amt,
			deposit_type:deposit_type,
			frequency:frequency,
			glsh_desc:glshdesc,
			glsh_code:ca_glcode,
			branch_desc:branch_desc,
			cust_id:ca_solid,
			scheme_code:scheme_code
	};
		if (depo === "") {
			$("#alertmsg1").text("Please fill out the Deposit Account No field.");
			$('#alert1').modal("show");
			return;

		} else {
			$.ajax({
				url : './depositAddCust',
				contentType: "application/json",
				data :JSON.stringify(Deposit),
				type : 'POST',
				success : function(data) {
					//alert(data)
					//$("#alertmsg").text(data);
					//$('#alert').modal("show");

				}
			});
		}
	}
	function AccountDetailNxtCorporate(){
		
		
		  var refnumber = document.getElementById("appl_ref_no").value;
		 
		  $.ajax({
	          type: "POST",
	          url: "./AccountDetailNxt?refnumber=" + refnumber,
	          data: $("#parisone").serialize(),
	          success: function (response) {
	        	  if($("#schemetype").val()==="LA"){
	        		  addRecords1();
	          	}else{
	          		depositadd1();
	          	}
	              // Insert the response into the modal-body
	              $("#mypopup1 .modal-body").html(response);

	              // Show the modal
	              $('#mypopup1').modal('show');

	          }
	      });

	}
	
	function depositadd1() {
		const depo = document.getElementById("depo_actno").value.trim();
		const deposit_date = document.getElementById("deposit_date").value.trim();
		const deposit_amt = document.getElementById("deposit_amt").value.trim();
		const currency = document.getElementById("currency").value.trim();
		const deposit_period = document.getElementById("deposit_period").value.trim();
		const maturity_date = document.getElementById("maturity_date").value.trim();
		const rate_of_int  = document.getElementById("rate_of_int").value.trim();
		const int_amt = document.getElementById("int_amt").value.trim();
		const maturity_amt  = document.getElementById("maturity_amt").value.trim();
		const deposit_type = document.getElementById("deposit_type").value.trim();
		const frequency = document.getElementById("frequency").value.trim();
		//const glshdesc = document.getElementById("glshdesc").value.trim();
		const ca_glcode = document.getElementById("glheadcode").value.trim();
		const branch_desc= document.getElementById("branchdesc").value.trim();
	const ca_solid = document.getElementById("ca_cif_id_1").value.trim();
	const scheme_code = document.getElementById("schmcode").value.trim();

	var Deposit = {
			depo_actno : depo,
			deposit_date:deposit_date,
			deposit_amt:deposit_amt,
			currency:currency,
			deposit_period:deposit_period,
			maturity_date:maturity_date,
			rate_of_int:rate_of_int,
			int_amt:int_amt,
			maturity_amt:maturity_amt,
			deposit_type:deposit_type,
			frequency:frequency,
		//	glsh_desc:glshdesc,
			glsh_code:ca_glcode,
			branch_desc:branch_desc,
			cust_id:ca_solid,
			scheme_code:scheme_code
	};
		if (depo === "") {
			$("#alertmsg1").text("Please fill out the Deposit Account No field.");
			$('#alert1').modal("show");
			return;

		} else {
			$.ajax({
				url : './depositAddCust',
				contentType: "application/json",
				data :JSON.stringify(Deposit),
				type : 'POST',
				success : function(data) {
					//alert(data)
					//$("#alertmsg").text(data);
					//$('#alert').modal("show");

				}
			});
		}
	}

	function showError(element, message) {
	    // Check if an error message span already exists, if not create one
	    if (!element.next('.error-message').length) {
	        // Create a new span element to hold the error message
	        var errorSpan = $('<span class="error-message"></span>').text(message);

	        // Apply styling for the error message (red color)
	        errorSpan.css('color', 'red');

	        // Append the error message span after the input field
	        element.after(errorSpan);
	    }
	}

	function hideError(element) {
	    // Remove the error message span if it exists
	    element.next('.error-message').remove();
	}

	 </script>

<script>
/* function submitfile(value) {
    // Check if required fields are filled
    if ($("#docType0").val() == "" || $("#docCode0").val() == "" || $("#docDesc0").val() == "" ||
        $("#uniqId0").val() == "" || $("#docIssPlace0").val() == "" || $("#docIssDate0").val() == "" ||
        $("#docExpDate0").val() == "") {
        alert("Please fill the required fields.");
    } else {
        // Get application reference number
        var rec_no = document.getElementById('numberone').textContent;
        var appl_ref_no = value.getAttribute("data-refnumber");
        alert(appl_ref_no);

        // Get table rows and initialize arrays
        const table = document.getElementById("dynamicTable").getElementsByTagName('tbody')[0];
        const rows = table.getElementsByTagName('tr');
        const dynamicvalues = [];
        const imageValues = [];

        // Loop through each row in the table
        for (let i = 0; i < rows.length; i++) {
            const row = rows[i];
            const inputs = row.getElementsByTagName('input');

            // Ensure the input for file exists and has files
            if (inputs[7] && inputs[7].files.length > 0) {
                const value = inputs[7].value;
                var a = value.split("\\");
                const lastValue = a[a.length - 1];

                // Collect row data
                const rowData = {
                    doctype: inputs[0].value,
                    doccode: inputs[1].value,
                    doctypesesc: inputs[2].value,
                    uniqueid: inputs[3].value,
                    placeofissue: inputs[4].value,
                    issuedate: inputs[5].value,
                    exprydate: inputs[6].value,
                    file: inputs[7].files[0], // File object
                    filename: lastValue
                };
                dynamicvalues.push(rowData);
                imageValues.push(inputs[7].files[0]); // Push file object to imageValues
            }
        }

        // Log the collected data for debugging
        console.log(JSON.stringify(dynamicvalues));

        // Send the data via AJAX
        $.ajax({
            url: '/BGLS/multiline?appl_ref_no=' + appl_ref_no + "&rec_no=" + rec_no,
            data: JSON.stringify(dynamicvalues),
            type: 'POST',
            contentType: 'application/json',
            success: function (data) {
                // Call image upload function with response data and dynamic values
                imageuploadFunction(data, dynamicvalues, appl_ref_no);
                openCity(event, 'india'); // Assuming this is defined elsewhere
            }
        });
    }
} */
	</script>
<script>
		var currentValue = localStorage.getItem("value") || 0;
		function opennext(evt, cityName) {
			const numberElement = document.getElementById("numberone");
			const currentElement = document.getElementById("numberone").textContent;
			const totalvalue = document.getElementById("totalvalue").textContent;
			// alert(totalvalue)
			//  alert(currentElement)
			if (currentElement == totalvalue) {
				//alert("The value is same")
				document.getElementById("counts1").style.display = "block";
				document.getElementById("nextBtn1").style.display = "block";
				document.getElementById("nextBtn2").style.display = "none";
				document.getElementById("nextBtn3").style.display = "none";
				document.getElementById("nextBtn4").style.display = "none";
				document.getElementById("nextBtn5").style.display = "none";
				document.getElementById("nextBtn6").style.display = "none";
				document.getElementById("nextBtn7").style.display = "none";
				document.getElementById("nextBtn8").style.display = "none";

				document.getElementById("collect1").style.display = "block";
				document.getElementById("collect2").style.display = "none";
				document.getElementById("collect3").style.display = "none";
				document.getElementById("collect4").style.display = "none";
				document.getElementById("collect5").style.display = "none";
				document.getElementById("collect6").style.display = "none";
				document.getElementById("collect7").style.display = "none";
				document.getElementById("collect8").style.display = "none";
			} else {
				if (cityName != "counts1") {
					let currentNumber = currentElement;
					currentNumber++;
					numberElement.textContent = currentNumber;
				}
				// alert(currentValue)
				if (cityName == "counts1" && currentValue == "0" || currentValue == "1") {

					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn1").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect1").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect8").style.display = "none";


					currentValue++;

				}

				if (cityName == "counts2" && currentValue == "2") {

					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn2").style.display = "block";
					document.getElementById("nextBtn1").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect2").style.display = "block";
					document.getElementById("collect1").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect8").style.display = "none";

					currentValue++;
				}

				if (cityName == "counts3" && currentValue == "3") {
					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";
					document.getElementById("nextBtn3").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn1").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect3").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect1").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect8").style.display = "none";

					currentValue++;
				}

				if (cityName == "counts4" && currentValue == "4") {
					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn4").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn1").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect4").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect1").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect8").style.display = "none";

					currentValue++;
				}
				if (cityName == "counts5" && currentValue == "5") {
					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn5").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn1").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect5").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect1").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect8").style.display = "none";

					currentValue++;
				}

				if (cityName == "counts6" && currentValue == "6") {
					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn6").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn1").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect6").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect1").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect8").style.display = "none";

					currentValue++;
				}

				if (cityName == "counts7" && currentValue == "7") {
					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn7").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn1").style.display = "none";
					document.getElementById("nextBtn8").style.display = "none";

					document.getElementById("collect7").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect1").style.display = "none";
					document.getElementById("collect8").style.display = "none";

					currentValue++;
				}

				if (cityName == "counts8" && currentValue == "8") {
					const noOfper = document.getElementById("noOfper");
					var i = noOfper;
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("file-uploadone");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablinks");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].className = tablinks[i].className
							.replace(" active", "");
					}
					document.getElementById(cityName).style.display = "block";
					evt.currentTarget.className += " active";

					document.getElementById("nextBtn8").style.display = "block";
					document.getElementById("nextBtn2").style.display = "none";
					document.getElementById("nextBtn3").style.display = "none";
					document.getElementById("nextBtn4").style.display = "none";
					document.getElementById("nextBtn5").style.display = "none";
					document.getElementById("nextBtn6").style.display = "none";
					document.getElementById("nextBtn7").style.display = "none";
					document.getElementById("nextBtn1").style.display = "none";

					document.getElementById("collect8").style.display = "block";
					document.getElementById("collect2").style.display = "none";
					document.getElementById("collect3").style.display = "none";
					document.getElementById("collect4").style.display = "none";
					document.getElementById("collect5").style.display = "none";
					document.getElementById("collect6").style.display = "none";
					document.getElementById("collect7").style.display = "none";
					document.getElementById("collect1").style.display = "none";


					currentValue++;
				}

			}

		}
	</script>
<style>
.file-uploadone {
	background-color: #ffffff;
	width: 200px;
	margin: 0 auto;
	padding: 20px;
	display: none;
}
</style>
<script>
/* function Onschemetype() {
    var schemetype = document.getElementById("schemetype").value; 
    $.ajax({
        type: 'GET',
        url: "./getSchemeDetails?schemetype=" + schemetype,
        success: function (response) {
            console.log(response);
            var SchemetypeDesc = response[0][0] != null ? response[0][0] : "";
            var SchemeCode = response[0][1];
            
            // Update Scheme Description based on SchemeCode
            var schemeDescription = "";
            switch(SchemeCode) {
                case 'SBGEN':
                    schemeDescription = "SAVING BANK GENERAL";
                    break;
                case 'CAGEN':
                    schemeDescription = "CURRENT ACCOUNT GENERAL";
                    break;
                case 'LAGEN':
                    schemeDescription = "LOAN ACCOUNT GENERAL";
                    break;
                case 'TDGEN':
                    schemeDescription = "TERM DEPOSIT GENERAL";
                    break;
                default:
                    schemeDescription = "UNKNOWN SCHEME";
            }

            $('#Schemetypedesc').text(SchemetypeDesc);
            $('#schmcode').val(SchemeCode);
            $('#Schemecodedesc').text(schemeDescription);  // Update description div
        }
    });
} */
function Onschemetype() {
    var schemetype = document.getElementById("schemetype").value; 
    $.ajax({
        type: 'GET',
        url: "./getSchemeDetails?schemetype=" + schemetype,
        success: function (response) {
            console.log(response);
            var SchemetypeDesc = response[0][0] != null ? response[0][0] : "";
            var SchemeCode = response[0][1];

            // Update Scheme Description based on SchemeCode
            var schemeDescription = "";
            switch(SchemeCode) {
                case 'SBGEN':
                    schemeDescription = "SAVING BANK GENERAL";
                    break;
                case 'CAGEN':
                    schemeDescription = "CURRENT ACCOUNT GENERAL";
                    break;
                case 'LAGEN':
                    schemeDescription = "LOAN ACCOUNT GENERAL";
                    break;
                case 'TDGEN':
                    schemeDescription = "TERM DEPOSIT GENERAL";
                    break;
                default:
                    schemeDescription = "UNKNOWN SCHEME";
            }

            // Update UI elements with fetched values
            $('#Schemetypedesc').text(SchemetypeDesc);
            $('#schmcode').val(SchemeCode);
            $('#Schemecodedesc').text(schemeDescription);  // Update description div

            // Hide both divs initially
            document.getElementById("Acc_TermDeposit").style.display = "none";
            document.getElementById("Acc_LeaseAccount").style.display = "none";

            // Show the respective div based on the SchemeCode
            if (SchemeCode === 'TDGEN') {
                document.getElementById("Acc_TermDeposit").style.display = "block";
            } else if (SchemeCode === 'LAGEN') {
                document.getElementById("Acc_LeaseAccount").style.display = "block";
            }
        }
    });
}


		function base64ToUint8Array(base64) {

			const binaryString = window.atob(base64);

			const length = binaryString.length;

			const uint8Array = new Uint8Array(length);

			for (let i = 0; i < length; i++) {
				uint8Array[i] = binaryString.charCodeAt(i);
			}

			return uint8Array;
		}

		function onimagesone() {
			var appl_ref_no = document.getElementById("gooom").value;
			//alert(appl_ref_no); 
			$
				.ajax({
					type: 'get',
					url: './api/getimagesone?appl_ref_no=' + appl_ref_no,

					success: function (response) {
						//alert(response); 
						const base64String = response;
						const uint8Array = base64ToUint8Array(base64String);

						const blob = new Blob([uint8Array]);

						const imageUrl = URL.createObjectURL(blob);

						const img = document.createElement("img");
						img.src = imageUrl;
						img.style.width = "200px";
						img.style.height = "200px";
						var element = document.getElementById("photoCapture1");
						element.appendChild(img);
						console.log(img);
					}
				});
		};


	</script>
<script>
function setOutstanding(inputElement) {
	var loan_outstanding = document.getElementById('loan_outstanding');
	loan_outstanding.value = inputElement.value.replace(/\D/g, '');
}

function calculateDrawingLimit() {
	var marginLimit = document.getElementById('margin_limit').value;
	var loanSanctioned = document.getElementById('loan_sanctioned').value; 

	// Validate the inputs
	if (marginLimit === "" || isNaN(marginLimit)) {
		document.getElementById('drawing_limit').value = ""; 
		return;
	}

	if (loanSanctioned === "" || isNaN(loanSanctioned)) {
		document.getElementById('drawing_limit').value = ""; 
		return;
	}

	
	var drawingLimit = (parseFloat(marginLimit) / 100) * parseFloat(loanSanctioned);

	// Set the calculated drawing limit
	document.getElementById('drawing_limit').value = drawingLimit.toFixed(2);
}

function calculatePercentage(a) {
	event.preventDefault();
	var loanPeriod = document.getElementById('loan_period').value;
	var loansanctioned = document.getElementById('loan_sanctioned').value;
	var date_of_loan = document.getElementById('date_of_loan').value;
	var expiryDateElement = document.getElementById('expiry_date');

	var total;

	if (loansanctioned === "") {

		document.getElementById('loan_period').value = "";
		$("#Normalalertmsg").text("Choose Santioned Amount First");
		$('#normalAlert').modal("show");

	}
	else if (date_of_loan === "") {

		document.getElementById('loan_period').value = "";
		$("#Normalalertmsg").text("Choose Date of loan");
		$('#normalAlert').modal("show");

	}

	else {
		var amount = (loansanctioned / loanPeriod);
		document.getElementById('inst_amount').value = amount.toFixed(2);


		var percentage = (loansanctioned / 100);
		total = percentage;
		var totals = (amount / total);

		document.getElementById('inst_pct').value = totals.toFixed(0);
		document.getElementById('no_of_inst').value = loanPeriod;
		document.getElementById('inst_id').value = '1';

		var loanDate = new Date(date_of_loan);
		loanDate.setMonth(loanDate.getMonth() + parseInt(loanPeriod));

		var day = loanDate.getDate();
		var month = (loanDate.getMonth() + 1).toString().padStart(2, '0');
		var year = loanDate.getFullYear();

		var formattedExpiryDate = day.toString().padStart(2, '0') + '-' + month + '-' + year;
		expiryDateElement.value = formattedExpiryDate;

	}


}
		function getRepaymentDetails(a) {
			event.preventDefault();

			var principleAmount = document.getElementById("loan_sanctioned").value.replace(/,/g, '');
			var santionedDate = changeDateFormat(document.getElementById("date_of_loan").value);
			var interestRate = document.getElementById("effective_interest_rate").value.replace(/,/g, '');

			var installID = $("#inst_id").val();
			var installStartDate = changeDateFormat(document.getElementById("inst_start_dt").value);
			var pricipleFreq = document.getElementById("inst_freq").value;
			var noOfInstallment = document.getElementById("no_of_inst").value;
			var installAmount = document.getElementById("inst_amount").value.replace(/,/g, '');
			var interestFreq = document.getElementById("interest_frequency").value;

			console.log(principleAmount + " " + santionedDate + " " + interestRate + " " + installID + " " + installStartDate + " "
				+ pricipleFreq + " " + noOfInstallment + " " + installAmount + " " + interestFreq);
			 $
				.ajax({
					type: "GET",
					url: "./getInterestDetails?creation_Date=" + santionedDate
						+ "&start_date=" + installStartDate + "&Product_value=" + principleAmount
						+ "&principle_frequency=" + pricipleFreq + "&int_rate=" + interestRate
						+ "&no_of_inst=" + noOfInstallment + "&int_amt="
						+ installAmount + "&interestFrequency=" + interestFreq,
					success: function (data) {
						console.log(data);
						var trHTML = '';
						$
							.each(
								data,
								function (index, entity) {

									var no_of_instalment = entity.no_of_instalment;
									var from_date = formatDate(entity.from_date);
									var installment_date = formatDate(entity.installment_date);
									var installment_description = entity.installment_description;
									var installment_amt = formatNumber(entity.installment_amt);
									var principal_amt = formatNumber(entity.principal_amt);
									var interest_amt = formatNumber(entity.interest_amt);
									var charges_amt = formatNumber(entity.charges_amt);
									var principal_outstanding = formatNumber(entity.principal_outstanding);



									trHTML += '<tr id="sechduleRow">'
										+ '<td><input type="text" class="border-0" name="scheduleNo" readonly value="' + no_of_instalment + '" /></td>'
										+ '<td><input type="text" class="border-0" name="originalDemandDate" readonly value="' + from_date + '" /></td>'

										+ '<td><input type="text" class="border-0" name="demandType" readonly value="' + installment_description + '" /></td>'
										+ '<td><input type="text" class="text-right border-0" name="demandId" readonly value="' + installment_amt + '" /></td>'
										+ '<td><input class="text-right border-0"  type="text" readonly name="demandAmount" value="'
										+ principal_amt
										+ '" /></td>'
										+ '<td><input type="text" class="text-right border-0" name="demandId" readonly value="' + interest_amt + '" /></td>'
										+ '<td><input type="text"  class="text-right border-0" name="demandId" readonly value="' + charges_amt + '" /></td>'
										+ '<td><input type="text"  class="text-right border-0" name="demandId" readonly value="' + principal_outstanding + '" /></td>'

										+ '</tr>';

								});
						$('#repaymentDet').empty().append(trHTML);
						 


					},
					error: function (error) {
						console.error(error);
					}
				}); 
		}

		function changeDateFormat(dateString) {

			var parts = dateString.split('-');

			return parts[2] + '-' + parts[1] + '-' + parts[0];
		}
		function formatDate(dateString) {

			var date = new Date(dateString);


			var day = date.getDate();
			var month = date.getMonth() + 1;
			var year = date.getFullYear();


			if (day < 10) {
				day = '0' + day;
			}
			if (month < 10) {
				month = '0' + month;
			}

			return day + '-' + month + '-' + year;
		}

		function formatNumber(number) {
			return Number(number).toLocaleString('en-US', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
		}
		
		function Onglshcode() {
			var glsh = document.getElementById("glheadcode").value;
			
			$.ajax({
				type: 'GET',
				url: "./getglshCode?glsh=" + glsh,
				success: function (response) {
					console.log(response);
					var GLSHDesc = response[0] != null ? response[0] : ""; 
					$('#glshdesc').val(GLSHDesc); 
				}
			});
	} 
	</script>
<script type="text/javascript">
	function Onschemetype1(){
		   var schemetype = document.getElementById("schemetype").value; 
		  console.log(schemetype);
		  var scheme;
		  if(schemetype === 'LA'){
			  scheme = 'LSRET';
		  }else{
			  scheme = 'TDFIXED';
		  }
		  console.log(scheme);
			$.ajax({
				url : 'Onschemetype1document',
				type : 'GET',
				dataType : 'json',
				data : {
					schemetype : scheme
				}, // Pass the selected value as data
					success : function(response) {
					console.log(response);
						$("#schemetype").val(response.schemetype);
						$("#schmcode").val(response.schmcode);
						//var SchemeCode=response.schmcode;
						 var schemeDescription = "";
						 switch(response.schemetype) {
			                case 'TD':
			                	schemeDescription = "TERM DEPOSIT GENERAL";
			                    break;
			               
			                case 'LA':
			                    schemeDescription = "LOAN ACCOUNT GENERAL";
			                    break;
			               
			                default:
			                    schemeDescription = "UNKNOWN SCHEME";
			            }
						 // Hide both divs initially
				            document.getElementById("Acc_TermDeposit").style.display = "none";
				            document.getElementById("Acc_LeaseAccount").style.display = "none";

				            // Show the respective div based on the SchemeCode
				            if (response.schemetype === 'TD') {
				                document.getElementById("Acc_TermDeposit").style.display = "block";
				            } else if (response.schemetype === 'LA') {
				                document.getElementById("Acc_LeaseAccount").style.display = "block";
				            }

				            else if (SchemeCode === 'TDREINVEST') {
				                document.getElementById("Acc_TermDeposit").style.display = "block";
				            }

					// Set the formatted date to the input field
				
					$("#ca_glcode").val(response.gl_code);
					$("#glshdesc").val(schemeDescription);
					$("#docType0").val(response.documents_type1);
					$("#docCode0").val(response.documents_code1);
					$("#docDesc0").val(response.documents_desc1);
					$("#docType1").val(response.documents_type2);
					$("#docCode1").val(response.documents_code2);
					$("#docDesc1").val(response.documents_desc2);
				
				},
				error : function(xhr, status, error) {
					// Handle error here
				}
			});
	}
	</script>
<script type="text/javascript">
	function Onschemetypecor(){
		   var schemetype = document.getElementById("schemetype").value; 
		   console.log(schemetype);
			  var scheme;
			  if(schemetype === 'LA'){
				  scheme = 'LSRET';
			  }else{
				  scheme = 'TDFIXED';
			  }
			  console.log(scheme);
			$.ajax({
				url : 'Onschemetype1cordocument',
				type : 'GET',
				dataType : 'json',
				data : {
					schemetype : scheme
				}, // Pass the selected value as data
					success : function(response) {
						//alert(response)
						$("#schemetype").val(response.schemetype);
						$("#schmcode").val(response.schmcode);
						//var SchemeCode=response.schmcode;
						 var schemeDescription = "";
						 switch(response.schemetype) {
			                case 'TD':
			                	schemeDescription = "TERM DEPOSIT GENERAL";
			                    break; 
			                case 'LA':
			                    schemeDescription = "LOAN ACCOUNT GENERAL";
			                    break;
			               
			                default:
			                    schemeDescription = "UNKNOWN SCHEME";
			            }
						 // Hide both divs initially
				            document.getElementById("Acc_TermDeposit").style.display = "none";
				            document.getElementById("Acc_LeaseAccount").style.display = "none";

				            // Show the respective div based on the SchemeCode
				            if (response.schemetype === 'TD') {
				                document.getElementById("Acc_TermDeposit").style.display = "block";
				            } else if (response.schemetype === 'LA') {
				                document.getElementById("Acc_LeaseAccount").style.display = "block";
				            }

				            else if (response.schemetype === 'TDREINVEST') {
				                document.getElementById("Acc_TermDeposit").style.display = "block";
				            }

					// Set the formatted date to the input field
				
					$("#glheadcode").val(response.gl_code);
					$("#glshdesc").val(schemeDescription);
					$("#docType0").val(response.documents_type1);
					$("#docCode0").val(response.documents_code1);
					$("#docDesc0").val(response.documents_desc1);
					$("#docType1").val(response.documents_type2);
					$("#docCode1").val(response.documents_code2);
					$("#docDesc1").val(response.documents_desc2);
				
				},
				error : function(xhr, status, error) {
					// Handle error here
				}
			});
	}

	</script>

</head>


<body >
	<div class="col-sm-2 d-flex align-items-center">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<!-- Start Content-->
	<div class="container-manager">
	<div  class="card" >
							<div class="row"
								style="overflow: auto; white-space: nowrap; margin-left: 15px">
								<form action="/BGLS/submit" method="post" enctype="multipart/form-data">
								<table border="1" id="dynamicTable" class="table table-bordered"
									style="text-align: center; vertical-align: 22px; margin-top: 10px; font-size: 15px;">
									<thead>
										<tr>
<th>Application REF</th>
											<th>Document Type</th>
											<th>Document Code</th>
											<th>Document Description</th>
											<th>Unique Id</th>
											<th>Place of Issue</th>
											<th>Issue Date</th>
											<th>Expiry Date</th>
											<th>Document Upload</th>
									<tbody id="click1">
										<tr>
<td>
											
<input type="text" id="reftype0" name="appl_ref_no"
												th:value=${appreNO}
												maxlength="10" class="uniform-input" autocomplete="off"></td>
											<td>
											
<input type="text" id="docType0" name="docType"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												maxlength="10" class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="docCode0" name="docCode"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												maxlength="10" class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="docDesc0" name="docDesc"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="uniqId0" maxlength="13"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="uniqId" class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="docIssPlace0"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="docIssPlace" maxlength="25" class="uniform-input"
												autocomplete="off"></td>
											<td><input type="date" id="docIssDate0"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="docIssDate" class="uniform-input" autocomplete="off"></td>
											<td><input type="date" id="docExpDate0"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="docExpDate" class="uniform-input" autocomplete="off"></td>
											<td class="span2"><input id="file0" type="file" name="uploadfile"
												onchange="readURL(this);"></td>
										</tr>
									 <tr>
										<td>
											<input type="text" id="refType1" name="appl_ref_no"
												th:value=${appreNO}
												maxlength="10" class="uniform-input" autocomplete="off"></td>
											<td>
											<input type="text" id="docType1" name="docType"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												maxlength="10" class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="docCode1" name="docCode"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="docDesc1" name="docDesc"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="uniqId1" name="uniqId"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												class="uniform-input" autocomplete="off"></td>
											<td><input type="text" id="docIssPlace1"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="docIssPlace" class="uniform-input" autocomplete="off"></td>
											<td><input type="date" id="docIssDate1"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="docIssDate" class="uniform-input" autocomplete="off"></td>
											<td><input type="date" id="docExpDate1"
												onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
												name="docExpDate" class="uniform-input" autocomplete="off"></td>
											<td><input type="file" id="file1" name="uploadfile"
												onchange="readURL(this);"></td>

										</tr>

									</tbody>
								</table>
								<button type="submit">Submit</button>
								</form>

							</div>
							<div class="text-center card-footer">
								<button class="btn btn-primary p-2" type="button"
									onclick="rowadddcorporate()">Add</button>
								<button class="btn btn-primary p-2" type="button"
									onclick="rowdelete()">Remove</button>
								<button class="btn btn-primary p-2" type="button"
									th:attr="data-refnumber=${appreNO}"
									onclick="submitfile(this)">Submit</button>
							</div>
							
						</div>
	
		</div>

</body>
</html>
